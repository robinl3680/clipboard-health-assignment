# Ticket Breakdown
We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**


Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".


You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Your Breakdown Here

Ticket1: Update Agent Schema and Model to incorporate custom ID
Description: Currently the Agent model does support only the ID which is generated by DB. We need to update the model to inlclude one more field 'customID'.
Acceptance Criteria:
  1. Update the model with 'customID' attribute.
  2. Update the DB schema with 'customID' field.
  3. Type of 'customID' is string and it can be nullable
Time/Effort: 
  Development: 4hours
  Testing: 2hours
Implementation Details:
  1. Modify Agent model to include new string attribute 'customID'
  2. Use ALTER TABLE SQL query to alter the existing table and add new column 'customID' and use DB migration tools like Sequelize to perform this
  3. Update Data access layer using ORM to include the new attribute while querying

Ticket2: DB migration to populate 'customID' attribute.
Description: After updating the DB and model with new attribute we need to have a migration strategy to update existing table with new data available.
Acceptance criteria:
 1. Retrieve custom ID for each agent if any is available and populate 'customID'
 2. Execute the migration to update 'customID' for each agent.
 3. Verify the migration through thorough testing to ensure that no data is missed out
Time/Effort:
 Development: 4hours
 Testing: 3hours
Implementation details:
 1. Read the custom ID's provided from csv or user input.
 2. Write migration scripts to iterate over each ids and update the DB using ORM
 3. Implement error handling and null handling cases

Ticket3: Update report generation to incorporate custom IDs
Description: The report generation process should be updated to accomodate new custom IDs generated to handle the logic correctly.
Acceptnce criteria:
 1. Modify the generateReport function to use customID if available for an agent to generate report.
 2. If no custom ID is available then DB generated ID can be used
 3. In the generated reports customID should be visible
Time/Effort:
 Development: 3hours
 Testing: 2hours
Implementation details:
 1. Retrieve the meta data info which contains custom ID by calling getShiftsByFacility function
 2. Modify existing logic of generateReport to use custom IDs
 3. Update the template used for reports to incorporate the customID

Ticket4: UI layer for adding or updating custom IDs
Description: To allow facilities to add or update custom IDs we can have a UI layer in admin dashboard as an added feature.
Acceptance criteria:
 1. A new page should be visible for adding custom IDs
 2. List page of showing all custom IDs
 3. Update feature on list page which helps to update existing custom ID
 4. Clear feedback on customID like validation on the type and format
 5. Backend should expose APIs to UPSERT the customIDs
Time/Effort:
 Development: 4hours
 Testing: 2hours
Implementation details:
 1. Can use any existing admin dashboard if available/ new dashboard using admin packages.
 2. Implement custom UI for list, new and update
 3. Integrate API calls to add/update custom IDs
 4. Implement the backend logic to update the DB on receiving the data from UI.

